import{r as x,j as e,L as f,P as v,I as d,B as o}from"./index-Bl7s4VzA.js";import{D as y,a as w,b,c as D,d as C,e as M}from"./dialog-DCOcG2c2.js";import{L as t}from"./label-s7AvLBDK.js";import{R as P,a as h}from"./radio-group-CsLAOZ8n.js";import{A as S}from"./arrow-left-Dp1lr5Kg.js";import{T as I}from"./trash-2-B9XP7aVc.js";import{C as m}from"./credit-card-BWVPYKp3.js";import{S as V}from"./smartphone-anWcFTs4.js";import"./index-B7K4-hLV.js";import"./index-1mwFcY8h.js";import"./index-C2xba8IL.js";function Y(){const[r,n]=x.useState([]),[p,c]=x.useState(!1),[a,i]=x.useState({type:"card",cardNumber:"",expiryDate:"",holderName:"",walletPhone:""}),j=()=>{let s;if(a.type==="card"&&a.cardNumber&&a.expiryDate&&a.holderName){const l=`•••• ${a.cardNumber.slice(-4)}`;s={id:Date.now().toString(),type:"card",title:`Visa ${l}`,details:`Истекает ${a.expiryDate}`,isDefault:r.length===0}}else if(a.type==="wallet"&&a.walletPhone)s={id:Date.now().toString(),type:"wallet",title:"SberPay",details:a.walletPhone,isDefault:r.length===0};else return;n([...r,s]),i({type:"card",cardNumber:"",expiryDate:"",holderName:"",walletPhone:""}),c(!1)},u=s=>{n(r.filter(l=>l.id!==s))},g=s=>{n(r.map(l=>({...l,isDefault:l.id===s})))},N=s=>{switch(s){case"card":return m;case"wallet":return V;default:return m}};return e.jsxs("main",{className:"pb-20",children:[e.jsx("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(f,{href:"/profile",children:e.jsx("button",{className:"mr-3 p-2 -ml-2",children:e.jsx(S,{className:"w-6 h-6 text-gray-600"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Способы оплаты"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[r.length," способов"]})]})]}),e.jsxs(y,{open:p,onOpenChange:c,children:[e.jsx(w,{asChild:!0,children:e.jsx("button",{className:"bg-agent-purple text-white p-2 rounded-lg",children:e.jsx(v,{className:"w-5 h-5"})})}),e.jsxs(b,{className:"max-w-md mx-auto",children:[e.jsxs(D,{children:[e.jsx(C,{children:"Добавить способ оплаты"}),e.jsx(M,{children:"Добавьте новую банковскую карту или электронный кошелек для оплаты заказов"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{children:"Тип оплаты"}),e.jsxs(P,{value:a.type,onValueChange:s=>i({...a,type:s}),className:"flex flex-row space-x-4 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{value:"card",id:"card-type"}),e.jsx(t,{htmlFor:"card-type",children:"Банковская карта"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{value:"wallet",id:"wallet-type"}),e.jsx(t,{htmlFor:"wallet-type",children:"Кошелек"})]})]})]}),a.type==="card"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"card-number",children:"Номер карты"}),e.jsx(d,{id:"card-number",placeholder:"1234 5678 9012 3456",value:a.cardNumber,onChange:s=>i({...a,cardNumber:s.target.value}),maxLength:19})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"expiry",children:"Срок действия"}),e.jsx(d,{id:"expiry",placeholder:"MM/YY",value:a.expiryDate,onChange:s=>i({...a,expiryDate:s.target.value}),maxLength:5})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"cvv",children:"CVV"}),e.jsx(d,{id:"cvv",placeholder:"123",maxLength:3})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"holder",children:"Имя владельца"}),e.jsx(d,{id:"holder",placeholder:"IVAN IVANOV",value:a.holderName,onChange:s=>i({...a,holderName:s.target.value.toUpperCase()})})]})]}):e.jsxs("div",{children:[e.jsx(t,{htmlFor:"wallet-phone",children:"Номер телефона"}),e.jsx(d,{id:"wallet-phone",placeholder:"+7 (999) 123-45-67",value:a.walletPhone,onChange:s=>i({...a,walletPhone:s.target.value})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(o,{variant:"outline",onClick:()=>c(!1),className:"flex-1",children:"Отмена"}),e.jsx(o,{onClick:j,className:"flex-1 bg-agent-purple hover:bg-agent-purple/90",disabled:a.type==="card"?!a.cardNumber||!a.expiryDate||!a.holderName:!a.walletPhone,children:"Добавить"})]})]})]})]})]})}),e.jsx("section",{className:"p-4 space-y-3",children:r.map(s=>{const l=N(s.type);return e.jsx("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-agent-purple/10 p-2 rounded-lg",children:e.jsx(l,{className:"w-5 h-5 text-agent-purple"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.title}),s.isDefault&&e.jsx("span",{className:"bg-agent-purple text-white text-xs px-2 py-1 rounded-full",children:"По умолчанию"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:s.details})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[!s.isDefault&&e.jsx("button",{onClick:()=>g(s.id),className:"text-agent-purple text-sm font-medium",children:"По умолчанию"}),e.jsx("button",{onClick:()=>u(s.id),className:"text-red-500 p-1",children:e.jsx(I,{className:"w-4 h-4"})})]})]})},s.id)})}),e.jsx("section",{className:"p-4",children:e.jsxs("div",{className:"bg-green-50 p-4 rounded-xl",children:[e.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Безопасность"}),e.jsx("p",{className:"text-sm text-green-700",children:"Все данные карт шифруются и хранятся в соответствии со стандартами PCI DSS. Мы не сохраняем CVV-коды и используем токенизацию для безопасных платежей."})]})})]})}export{Y as default};
