import{g,r as h,a as c,j as e,L as p,S as n}from"./index-Bl7s4VzA.js";import{C as u,P as y}from"./product-card-C4l0tKkZ.js";import{A as j}from"./arrow-left-Dp1lr5Kg.js";import"./useMutation-CyJnlrj4.js";import"./check-BlHW5vLV.js";function w(){const{categoryId:r}=g(),[s,o]=h.useState(""),{data:l=[]}=c({queryKey:["/api/categories"]}),{data:i=[]}=c({queryKey:["/api/products",r||"all"],queryFn:()=>{const a=r?`/api/products?category=${r}`:"/api/products";return fetch(a).then(m=>m.json())}}),{data:x=[]}=c({queryKey:["/api/products","search",s],queryFn:()=>fetch(`/api/products?search=${encodeURIComponent(s)}`).then(a=>a.json()),enabled:s.length>0}),t=r?l.find(a=>a.id===r):null,d=s?x:i;return e.jsxs("main",{className:"pb-20",children:[e.jsx("header",{className:"bg-[#5B21B6] dark:bg-card shadow-sm sticky top-0 z-40",children:e.jsxs("div",{className:"flex items-center p-4 bg-[#5B21B6]",children:[t&&e.jsx(p,{href:"/catalog",children:e.jsx("button",{className:"mr-3 p-2 -ml-2",children:e.jsx(j,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:"flex-1",children:e.jsx("h1",{className:"text-xl font-bold dark:text-gray-100 text-[#ffffff]",children:t?t.name:"Каталог"})})]})}),e.jsx("section",{className:"p-4 bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"relative",children:[e.jsx(n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Поиск в каталоге...",value:s,onChange:a=>o(a.target.value),className:"w-full pl-10 pr-4 py-3 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-gray-100 placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-agent-purple/50 focus:border-agent-purple/50"})]})}),!r&&!s&&e.jsxs("section",{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-4",children:"Категории"}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:l.slice(0,8).map(a=>e.jsx(u,{category:a},a.id))})]}),e.jsxs("section",{className:"p-4",children:[s&&e.jsx("div",{className:"mb-4",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:['Результаты поиска по запросу "',s,'"']})}),d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(n,{className:"w-8 h-8"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:s?"Товары не найдены":"Нет товаров"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:s?"Попробуйте изменить поисковый запрос":"В этой категории пока нет товаров"})]}):e.jsx("div",{className:"grid grid-cols-2 gap-3",children:d.map(a=>e.jsx(y,{product:a},a.id))})]})]})}export{w as default};
