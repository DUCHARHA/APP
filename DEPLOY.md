# Деплой на Render

## Подготовка проекта

Ваше приложение уже подготовлено для деплоя на Render. Все необходимые файлы настроены:

- ✅ `render.yaml` - конфигурация для автоматического деплоя
- ✅ `package.json` - скрипты для билда и запуска
- ✅ База данных настроена для работы с PostgreSQL
- ✅ Environment variables правильно обрабатываются

## Шаги деплоя

### 1. Подготовка кода
```bash
# Убедитесь что проект билдится без ошибок
npm run build

# Проверьте что все файлы закоммичены в git
git add .
git commit -m "Подготовка к деплою"
git push origin main
```

### 2. Создание сервиса на Render

1. Зайдите на [render.com](https://render.com) и войдите в аккаунт
2. Нажмите "New +" → "Blueprint"
3. Подключите ваш GitHub/GitLab репозиторий
4. Render автоматически прочитает файл `render.yaml` и настроит:
   - Web сервис (приложение)
   - PostgreSQL базу данных
   - Все необходимые environment variables

### 3. Environment Variables

Render автоматически настроит:
- `NODE_ENV=production`
- `DATABASE_URL` - из подключенной базы данных

Если у вас есть дополнительные переменные (например, для админки), добавьте их в настройках сервиса:
- `ADMIN_USERNAME` - имя админа (по умолчанию: admin)
- `ADMIN_PASSWORD` - пароль админа (по умолчанию: admin123)

### 4. После деплоя

1. Дождитесь завершения билда и деплоя
2. Откройте ссылку на ваше приложение
3. База данных автоматически заполнится начальными данными при первом запуске

## Особенности конфигурации

- **Порт**: Автоматически определяется из `process.env.PORT`
- **База данных**: PostgreSQL (Neon) с автоматическим подключением
- **Статические файлы**: Серверятся из папки `dist/public/`
- **Health check**: `/api/categories` - проверяет работу API и базы данных

## Структура билда

После выполнения `npm run build`:
- `dist/index.js` - серверное приложение
- `dist/public/` - статические файлы фронтенда
- `dist/public/index.html` - главная страница
- `dist/public/assets/` - JavaScript и CSS
- `dist/public/icons/` - иконки для PWA

## Логи и мониторинг

- Логи доступны в панели Render
- Приложение автоматически перезапускается при сбоях
- Health check срабатывает каждые 30 секунд

## Бесплатный тариф

На бесплатном тарифе Render:
- Приложение "засыпает" через 15 минут бездействия
- Первый запрос после "сна" может занять 10-30 секунд
- База данных удаляется через 90 дней (если нет активности)